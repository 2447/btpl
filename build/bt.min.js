/**
 * @name bt v1.4 - 极简极致的JavaScript模板引擎
 * @author: 楼教主
 * @date: 2015-07-31
 * @site: http://52cik.github.io/btpl/index.html
 * @license: MIT license
 */
!function(n,r){function e(n){var r=this;r.tpl=n,r.parse(),c[n]=r}function t(n,r){return new RegExp(n,r||"g")}function o(n,r){return r||o.config(r),a?new e(n):c[n]||new e(n)}var c={},a=!0,u=e.prototype={conf:{begin:"{{",end:"}}",varname:"d",strip:!0}},i={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"};u.encode=function(n){return String(n||"").replace(/&(?!#?[a-zA-Z0-9]+;)/g,"&amp;").replace(/[<>"'\/]/g,function(n){return i[n]})};var f=u.syntax={"#":function(n){return"';"+n+";out+='"},"=":function(n){return"'+this.encode("+n+")+'"},"@":function(n){if(""===n)return"';}out+='";var r,e=this.sid++;if(r=n.match(/\s*([\w."'\][]+)\s*(\w+)\s*(\w+)?/)){var t=r[3]||"ai"+e,o=r[2]||"av"+e,c="al"+e,a="arr"+e;n="';var "+a+"="+r[1]+","+t+"=-1,"+c+"="+a+".length-1,"+o+";while("+t+"<"+c+"){"+o+"="+a+"["+t+"+=1];out+='"}return n}};u.parse=function(){var n=this,e=u.conf,o=e.begin,c=e.end,i=t(o+"([#=@]|)([\\s\\S]*?|)"+c);n.sid=1;var p=n.tpl.replace(/'|\\/g,"\\$&");p=(e.strip?p.replace(/[\r\n\t]/g," "):p.replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")).replace(i,function(r,t,o){return o=(e.strip?o:o.replace(/(^|[^\\])\\r/g,"$1\r").replace(/(^|[^\\])\\n/g,"$1\n").replace(/(^|[^\\])\\t/g,"$1	")).replace(/^\s+|\s+$/g,"").replace(/\\('|\\)/g,"$1"),""===t&&""===o?r:f.hasOwnProperty(t)?f[t].call(n,o):"'+("+o+")+'"}),p="var out='';out+=' "+p+" ';return out;";try{var l=new Function(e.varname,p),s=n.render=function(r){return l.call(n,r)};return s.toString=function(){return l.toString()},a=!1,s}catch(g){var v="\u8be5\u6a21\u677f\u4e0d\u80fd\u521b\u5efa\u6e32\u67d3\u5f15\u64ce";return r!==console&&console.log(v+": "+p),function(){return v}}},o.ver=1.4,o.config=function(n){a=!0,n=n||{};for(var r in n)u.conf[r]=n[r]},"function"==typeof define?define(function(){return o}):"object"==typeof module&&"object"==typeof module.exports?module.exports=o:n.bt=o}(this);