/**
 * @name bt v2.0 - 极简极致的JavaScript模板引擎 (扩展版)
 * @author: 楼教主
 * @date: 2015-07-31
 * @site: https://github.com/52cik/btpl
 * @license: MIT license
 */
!function(r,n){function e(r){var n=this;n.tpl=r,n.parse(),a[r]=n}function t(r,n){return new RegExp(r,n||"g")}function o(r,n){return n||o.config(n),i?new e(r):a[r]||new e(r)}function c(r){var n,e,t;n=r.replace(/\|\|/g,"	"),e=n.split("|"),n=e[0];for(var o=1,c=e.length;c>o;o++)(t=e[o].match(s))&&(p[t[1]]?n="this.filters."+t[1]+"("+n+(t[2]?","+t[2]:"")+")":n+="| "+e[2]);return n.replace(/\t/g,"||")}var a={},i=!0,u=e.prototype={conf:{begin:"{{",end:"}}",varname:"d",strip:!0}},f={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"};u.encode=function(r){return String(r||"").replace(/&(?!#?[a-zA-Z0-9]+;)/g,"&amp;").replace(/[<>"'\/]/g,function(r){return f[r]})};var l=u.syntax={"#":function(r){return"';"+r+";out+='"},"=":function(r){return"'+this.encode("+c(r)+")+'"},"@":function(r){if(""===r)return"';}out+='";var n,e=this.sid++;if(n=r.match(/\s*([\w."'\][]+)\s*(\w+)\s*(\w+)?/)){var t=n[3]||"ai"+e,o=n[2]||"av"+e,c="al"+e,a="arr"+e;r="';var "+a+"="+n[1]+","+t+"=-1,"+c+"="+a+".length-1,"+o+";while("+t+"<"+c+"){"+o+"="+a+"["+t+"+=1];out+='"}return r}};u.parse=function(){var r=this,e=u.conf,o=e.begin,a=e.end,f=t(o+"([#=@]|)([\\s\\S]*?|)"+a);r.sid=1;var p=r.tpl.replace(/'|\\/g,"\\$&");p=(e.strip?p.replace(/[\r\n\t]/g," "):p.replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")).replace(f,function(n,t,o){return o=(e.strip?o:o.replace(/(^|[^\\])\\r/g,"$1\r").replace(/(^|[^\\])\\n/g,"$1\n").replace(/(^|[^\\])\\t/g,"$1	")).replace(/^\s+|\s+$/g,"").replace(/\\\\/g,"\\"),""===t&&""===o?n:l.hasOwnProperty(t)?l[t].call(r,o):"'+("+c(o)+")+'"}),p="var out='';out+=' "+p+" ';return out;";try{var s=new Function(e.varname,p),g=r.render=function(n){return s.call(r,n)};return g.toString=function(){return s.toString()},i=!1,g}catch(v){var d="\u8be5\u6a21\u677f\u4e0d\u80fd\u521b\u5efa\u6e32\u67d3\u5f15\u64ce";return n!==console&&console.log(d+": "+p),function(){return d}}},o.ver=2,o.config=function(r){i=!0,r=r||{};for(var n in r)u.conf[n]=r[n]},"function"==typeof define?define(function(){return o}):"object"==typeof module&&"object"==typeof module.exports?module.exports=o:r.bt=o;var p=u.filters={};o.filter=function(r,n){p[r]=n};var s=/(\w+)\s*(?::\s*(.+))?$/}(this);