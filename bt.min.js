/**
 * @name bt v1.3 - 极简极致的JavaScript模板引擎
 * @author: 楼教主
 * @date: 2015-06-30
 * @site: https://github.com/52cik/btpl
 * @license: MIT license
 */
!function(n,r){"use strict";function e(n){this.tpl=n}function t(n,e){return e=r===e?"g":e,new RegExp(n,e)}function o(n){return new e(n)}function c(n){var r,e,t;r=n.replace(/\|\|/g,"	"),e=r.split("|"),r=e[0];for(var o=1,c=e.length;c>o;o++)(t=e[o].match(y))&&(m[t[1]]?r="this.filters."+t[1]+"("+r+(t[2]?","+t[2]:"")+")":r+="| "+e[2]);return r.replace(/\t/g,"||")}function u(n){return n}var a=e.prototype={conf:{begin:"{{",end:"}}",varname:"d"}},i="",f=t(a.conf.begin+"([#=@]|)([\\s\\S]*?|)"+a.conf.end),l=t("[\\r\\n\\t]"),s=t("\\\\"),p=t("(?=\"|')"),v=t("&(?!#?[a-zA-Z0-9]+;)"),h=t("[<>\"'/]"),d=t("\\s*([\\w.\"'\\][]+)\\s*(\\w+)?\\s*(\\w+)?",i),g={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"};a.encode=function(n){return String(n||"").replace(v,"&amp;").replace(h,function(n){return g[n]})},a.render=function(n){var r=this,e=r.parse();return(r.render=function(n){return e.call(r,n)})(n)};var w=a.syntax={"#":function(n){return"';"+n+";out+='"},"=":function(n){return"'+this.encode("+u(n)+")+'"},"@":function(n){if(i===n)return"';}out+='";var r;if(r=n.match(d)){var e="i",t="val",o="len";r[2]&&(t=r[2]),r[3]&&(e=r[3]),n="';var arr="+r[1]+","+e+"=-1,"+o+"=arr.length-1,"+t+";while("+e+"<"+o+"){"+t+"=arr["+e+"+=1];out+='"}return n}};a.parse=function(){var n=this.tpl.replace(l,i).replace(s,"\\\\").replace(p,"\\").replace(f,function(n,r,e){return i!==e&&(e=e.replace(s,i)),w.hasOwnProperty(r)?w[r](e):"'+("+u(e)+")+'"});try{return new Function(a.conf.varname,"var out='';out+=' "+n+" ';return out;")}catch(e){throw r!==console&&console.log("\u8be5\u6a21\u677f\u4e0d\u80fd\u521b\u5efa\u6e32\u67d3\u5f15\u64ce: "+n),e}},o.ver=1.3,o.conf=a.conf,"function"==typeof define?define(function(){return o}):"object"==typeof module&&"object"==typeof module.exports?module.exports=o:n.bt=o;var m=a.filters={};o.filter=function(n,r){m[n]=r,u=c};var y=t("(\\w+)\\s*(?::\\s*(.+))?$",i)}(this);